{% extends "web/domains/case/import/view_case.html" %}


{% block main_content %}
  {% block application_contact %}
    {{ super() }}
  {% endblock %}

  <h4>Derogation from Sanctions Import Ban</h4>
  <div class="container">
    <dl>
      <dt class="bold">Applicant Reference</dt>
      <dd>{{ process.applicant_reference or 'N/A' }}</dd>
      <dt class="bold">Country Of Origin</dt>
      <dd>{{ process.origin_country.name }}</dd>
      <dt class="bold">Country Of Consignment</dt>
      <dd>{{ process.consignment_country.name }}</dd>
      <dt class="bold">Contract Sign Date</dt>
      <dd>{{ process.contract_sign_date.strftime('%d-%b-%Y') }}</dd>
      <dt class="bold">Contract Completion Date</dt>
      <dd>{{ process.contract_completion_date.strftime('%d-%b-%Y') }}</dd>
      <dt class="bold">Provide details of why this is a pre-existing contract</dt>
      <dd>{{ process.explanation or 'N/A' }}</dd>

    </dl>
  </div>

  <h4>Goods</h4>
  {% if goods %}
    <table responsiveList class="setoutList" id="tbl-search-results">
      <thead>
        <tr>
          <th>Commodity Code</th>
          <th>Goods Descriptions</th>
          <th>Quantity</th>
          <th>Unit</th>
          <th>Value (GBP CIF)</th>
        </tr>
      </thead>
      {% for row in goods %}
        <tr class="result-row">
          <td>{{ row.commodity_code }}</td>
          <td>{{ row.goods_description }}</td>
          <td>{{ row.quantity_amount }}</td>
          <td>kilos</td>
          <td>{{ row.value }}</td>
        </tr>
      {% endfor %}
    </table>
  {% else %}
    <div class="info-box info-box-info">
      There are no goods attached.
    </div>
  {% endif %}

  <h4>Supporting Documents</h4>
  {% if supporting_documents %}
    <table class="setoutList">
      <thead>
        <tr>
          <th>Document type</th>
          <th>Uploaded by</th>
          <th>File (size)</th>
        </tr>
     </thead>
     <tbody>
        {% for file in supporting_documents %}
        <tr>
          <td>Supporting documents</td>
          <td>
            {{ file.created_by.full_name }}<br>
            {{ file.created_datetime.strftime('%d-%b-%Y %H:%M')}}
          </td>
          <td><a href="{{ icms_url('import:sanctions:view-supporting-document', kwargs={'application_pk': process.pk, 'document_pk': file.pk}) }}">
          {{ file.filename }}</a> {{ file.human_readable_file_size() }}</td>
        </tr>
        {% endfor %}
     </tbody>
    </table>
  {% else %}
    <div class="info-box info-box-info">
        There are no supporting documents attached.
    </div>
  {% endif %}
{% endblock %}
