{% extends "flow/task-base.html" %}
 {% import "forms/forms.html" as forms %}
 {% import "forms/fields.html" as fields %}

 {% block sidebar %}
     {% include "partial/case/import/wood/sidebar.html" %}
 {% endblock %}

 {% block main_content %}
   {% block task_details %}
     {{ super() }}
   {% endblock %}

   {% call forms.form(action='', method='post', csrf_input=csrf_input) -%}
     <h4>Contact</h4>
     {{ fields.field(form.contact) }}

     <h4>Wood (Quota)</h4>
     {{ fields.field(form.applicant_reference) }}
     {{ fields.field(form.shipping_year) }}

     <h4>Exporter details</h4>
     {{ fields.field(form.exporter_name) }}
     {{ fields.field(form.exporter_address) }}
     {{ fields.field(form.exporter_vat_nr) }}

     <h4>Goods</h4>
     {{ fields.field(form.commodity_code) }}
     {{ fields.field(form.goods_description) }}
     {{ fields.field(form.goods_qty) }}
     {{ fields.field(form.goods_unit) }}

     <h4>Misc</h4>
     {{ fields.field(form.additional_comments) }}

     <input type="submit" name="action" class="primary-button button" value="Save" />
  {% endcall %}

   <h4>Certificates/documents</h4>
   <p>TODO: add what's needed (ICMSLST-557)</p>

   <h4>Supporting documents</h4>
   <p class="bold">Please provide any further supporting documents regarding this application.</p>
   <p>This may include invoices, evidence of past trade, or contracts.</p>

   {% if supporting_documents %}
     <table class="setoutList">
       <thead>
         <tr>
           <th>Document type</th>
           <th>Uploaded by</th>
           <th>File (size)</th>
           <th>Actions</th>
         </tr>
      </thead>
      <tbody>
         {% for file in supporting_documents %}
         <tr>
           <td>Supporting documents</td>
           <td>
             {{ file.created_by.full_name }}<br>
             {{ file.created_datetime.strftime('%d-%b-%Y %H:%M')}}
           </td>
           <td><a href="{{ icms_url('import:wood:view-supporting-document', kwargs={'application_pk': process.pk, 'document_pk': file.pk}) }}">
           {{ file.filename }}</a> {{ file.human_readable_file_size() }}</td>
           <td>
             <form method="post"
                 action="{{ icms_url('import:wood:delete-supporting-document', kwargs={'application_pk': process.pk, 'document_pk': file.pk}) }}">
               {{ csrf_input }}
               <button type="submit" class="small-button">Delete</button>
              </form>
           </td>
         </tr>
         {% endfor %}
      </tbody>
     </table>
   {% else %}
     <div class="info-box info-box-info">
         There are no supporting documents attached
     </div>
   {% endif %}

   <a class="button small-button" href="{{ icms_url('import:wood:add-supporting-document', kwargs={'pk': process.pk}) }}">Add supporting document</a>

{% endblock %}
