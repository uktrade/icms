{% extends "layout/no-sidebar.html" %}
{% import "forms/forms.html" as forms %}
{% import "forms/fields.html" as fields %}

{% block css %}
  {{ form.media.css }}
  <link rel="stylesheet" type="text/css" href="{{ static('web/css/pages/search.css') }}">
{% endblock %}

{% block main_content %}
<div class="no-sidebar" id="content">
    <div id="content-ie8-float">
        <div id="form-container">
            {% call forms.form(method='post', csrf_input=csrf_input, id="search-application-form") %}

              {% block form_fields %}

              {% if case_type == "import" %}
                {{ fields.field(form.case_ref, show_optional_indicator=False) }}
                {{ fields.field(form.licence_ref, show_optional_indicator=False) }}
                {{ fields.field(form.application_type, show_optional_indicator=False) }}

                <div id="application-sub-type-wrapper" {% if not show_application_sub_type %} style="display: none"{% endif %}>
                  {{ fields.field(form.application_sub_type, show_optional_indicator=False) }}
                </div>

                {{ fields.field(form.status, show_optional_indicator=False) }}
                {{ fields.field(form.decision, show_optional_indicator=False) }}
                {{ fields.field(form.importer_or_agent, show_optional_indicator=False) }}

                <div class="row">
                  {{ fields.inline_field_with_label(form.submitted_from, show_optional_indicator=False, label_cols='three', padding='zero', input_cols='two') }}
                  {{ fields.inline_field_with_label(form.submitted_to, show_optional_indicator=False, label_cols='one', padding='one', input_cols='two') }}
                </div>

                <div class="row">
                  {{ fields.inline_field_with_label(form.licence_from, show_optional_indicator=False, label_cols='three', padding='zero', input_cols='two') }}
                  {{ fields.inline_field_with_label(form.licence_to, show_optional_indicator=False, label_cols='one', padding='one', input_cols='two') }}
                </div>

                <div class="row">
                  {{ fields.inline_field_with_label(form.issue_from, show_optional_indicator=False, label_cols='three', padding='zero', input_cols='two') }}
                  {{ fields.inline_field_with_label(form.issue_to, show_optional_indicator=False, label_cols='one', padding='one', input_cols='two') }}
                </div>

                {{ fields.field(form.reassignment, show_optional_indicator=False, checkbox_label="Enable reassignment searching") }}
              {% else %}
                {{ fields.field(form.case_ref, show_optional_indicator=False) }}
                {{ fields.field(form.licence_ref, show_optional_indicator=False) }}
                {{ fields.field(form.application_type, show_optional_indicator=False) }}
                {{ fields.field(form.status, show_optional_indicator=False) }}
                {{ fields.field(form.decision, show_optional_indicator=False) }}
                {{ fields.field(form.exporter_or_agent, show_optional_indicator=False) }}

                <div class="row">
                  {{ fields.inline_field_with_label(form.submitted_from, show_optional_indicator=False, label_cols='three', padding='zero', input_cols='two') }}
                  {{ fields.inline_field_with_label(form.submitted_to, show_optional_indicator=False, label_cols='one', padding='one', input_cols='two') }}
                </div>

                <div class="row">
                  {{ fields.inline_field_with_label(form.closed_from, show_optional_indicator=False, label_cols='three', padding='zero', input_cols='two') }}
                  {{ fields.inline_field_with_label(form.closed_to, show_optional_indicator=False, label_cols='one', padding='one', input_cols='two') }}
                </div>

                {{ fields.field(form.cert_country, show_optional_indicator=False) }}
                {{ fields.field(form.manufacture_country, show_optional_indicator=False) }}
                {{ fields.field(form.pending_firs, show_optional_indicator=False) }}
                {{ fields.field(form.pending_update_reqs, show_optional_indicator=False) }}
                {{ fields.field(form.reassignment, show_optional_indicator=False, checkbox_label="Enable reassignment searching") }}
              {% endif %}

            {% endblock %}

            <div class="clearBoth"></div>
                <div class="container">
                  <div class="row">
                    <div class="four columns"> </div>
                    <div class="four columns">
                      <ul class="menu-out flow-across">
                        <li>
                          <button type="submit" class="primary-button button">
                            Search
                          </button>
                        </li>
                      </ul>
                    </div>
                    <div class="four columns"> </div>
                  </div>
                </div>
            {% endcall %}
        </div>
        <div class="content-actions"></div>
    </div>
</div>

{% if show_search_results %}
  {% include "web/domains/case/search/warnings.html" %}
  {% include "web/domains/case/search/actions.html" %}
  {% include "web/domains/case/search/results.html" %}
{% endif %}

{% endblock %}

{% block page_js %}
  {{ form.media.js }}
  {{ super() }}

  {% if case_type == "import" %}
    <script src="{{ static('web/js/pages/search-import.js') }}" type="text/javascript"></script>
  {% endif %}
{% endblock %}
